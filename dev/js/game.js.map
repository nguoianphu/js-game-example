{"version":3,"sources":["webpack:///webpack/bootstrap d0e060f6292d8efdd81d","webpack:///./Entry.js","webpack:///./Game.js","webpack:///./states/Boot.js","webpack:///./Config.js","webpack:///./LanguageDetector.js","webpack:///./states/Preloader.js","webpack:///./LettersConfig.js","webpack:///./states/mainMenu/MainMenu.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACPA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA,oDAAmD;;AAEnD;;AAEA;AACA;;AAEA;;AAEA,uB;;;;;;AC9FA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mBAAkB;AAClB;AACA;;AAEA,iBAAgB;AAChB;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gEAA+D;AAC/D;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;;AAEA;;AAEA,uB;;;;;;AC9LA;;AAEA;;AAEA;AACA;AACA,iCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA,yB;;;;;;ACdA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,0C;;;;;;ACvDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA,gBAAe;;AAEf;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;;AAEA,2DAA0D;AAC1D,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAwC;AACxC;;AAEA;AACA;AACA,2FAA0F;AAC1F,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA6B,cAAc;;AAE3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;;AAEA,4B;;;;;;ACrQA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,EAAC;;AAED,gC;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,SAAS;AAClD;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAqC,SAAS;AAC9C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAuC,SAAS;AAChD,wCAAuC,wBAAwB;AAC/D;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAuC,SAAS;AAChD,wCAAuC,wBAAwB;AAC/D;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAA+C,eAAe;AAC9D,0CAAyC,SAAS;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAqC,SAAS;AAC9C,4CAA2C,WAAW;AACtD;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA,4CAA2C,WAAW;AACtD;AACA,+CAA8C,QAAQ;AACtD,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF,6CAA4C,WAAW;AACvD;AACA,uDAAsD,SAAS;AAC/D,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,8CAA6C,uBAAuB;AACpE;AACA,+CAA8C,SAAS;AACvD,IAAG;AACH,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2B","file":"game.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d0e060f6292d8efdd81d\n **/","/**\r\n * Created by Vladislav on 28.07.2016.\r\n */\r\nvar Game = require(\"./Game.js\");\r\n\r\nwindow.onload = function() {\r\n\tnew Game();\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./Entry.js\n ** module id = 0\n ** module chunks = 0\n **/","var Boot = require('./states/Boot.js');\nvar Preloader = require('./states/Preloader.js');\nvar MainMenu = require('./states/mainMenu/MainMenu.js');\nvar Config = require('./Config.js');\n\nGame = function() {\n    this.start();\n};\n\nGame.isDesktop = true;\nGame.weakDevice = false;\nGame.wasPaused = false;\nGame.wasMuted = false;\nGame.development = false;\nGame.language = \"en\";\nGame.lettersConfig = null;\nGame.fontFamily = \"bariol_boldbold\";\nGame.texts = null;\nGame.storage = null;\nGame.stats = null;\nGame.mainMusicLoop = null;\nGame.fullVolume = 0.25;\nGame.reducedVolume = 0.15;\nGame.wordsSounds = null;\nGame.analytics = null;\nGame.KIM = null;\nGame.KIM_AVAILABLE = false;\n\nGame.prototype = {\n\n    constructor: Game,\n\n    start: function() {\n        this.game = new Phaser.Game(this.createConfig());\n\n        //Main.storage = new utils.LocalStorageWrapper();\n        //Main.stats = new game.GameStats(Main.storage);\n        //\n        //Main.analytics = new utils.GoogleAnalytics();\n\n        //this.initKIM_API();\n\n        this.game.state.add('Boot', Boot, true);\n        this.game.state.add('Preloader', Preloader);\n        this.game.state.add('MainMenu', MainMenu);\n        //this.game.state.add('LanguagesMenu', LanguagesMenu);\n        //this.game.state.add('ChooseLevelMenu', ChooseLevelMenu);\n        //this.game.state.add('ChooseWordMenu', ChooseWordMenu);\n        //this.game.state.add('Level', Level);\n        //this.game.state.add('WordLevel', WordLevel);\n        //this.game.state.add('FreeZone', FreeZone);\n        //this.game.state.add('LettersCompleteScreen', LettersCompleteScreen);\n    },\n\n\tcreateConfig: function() {\n\t\tvar desktop = this.checkDesktop();\n\t\tvar transparent = !desktop;\n\n\t\treturn {\n\t\t\twidth: Config.SOURCE_GAME_WIDTH,\n\t\t\theight: Config.SOURCE_GAME_HEIGHT,\n\t\t\t//renderer: Phaser.CANVAS,\n\t\t\trenderer: Phaser.AUTO,\n\t\t\ttransparent: transparent,\n\t\t\tantialias: false,\n\t\t\tenableDebug: Game.development\n\t\t};\n\t},\n\n\tcheckDesktop: function() {\n\t\tvar desktop = false;\n\t\tvar ua = detect.parse(window.navigator.userAgent);\n\t\tif (ua.device.type === \"Desktop\") {\n\t\t\tdesktop = true;\n\n\t\t\tif (ua.device.family.indexOf(\"Nexus\") > -1) {\n\t\t\t\tdesktop = false;\n\t\t\t}\n\t\t}\n\n\t\treturn desktop;\n\t},\n\n\tchangeState: function(newState, arg) {\n\t\t/*var stateTransitionPlugin = this.plugins.plugins[0];\n\t\tstateTransitionPlugin.changeState(newState, arg);*/\n\n\t\tconsole.log(\"change state\", newState);\n\n\t\tthis.state.start(newState, true, false, arg);\n\t}\n\n};\n\nmodule.exports = Game;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./Game.js\n ** module id = 1\n ** module chunks = 0\n **/","var Config = require('./../Config.js');\r\nvar Game = require('./../Game.js');\r\nvar detectLanguage = require('./../LanguageDetector.js');\r\n\r\nBoot = function () {\r\n\r\n};\r\n\r\nBoot.prototype = Object.create(Phaser.State);\r\nBoot.prototype = {\r\n\r\n\tconstructor: Boot,\r\n\r\n\tinit: function() {\r\n\t\tif (Phaser.Device.isAndroidStockBrowser()) {\r\n\t\t\tthis.game.canvas.parentElement.style.overflow = \"visible\";\r\n\t\t}\r\n\r\n\t\t// HACK\r\n\t\t//var style1 = { font: \"10px GrilledCheeseBTNToasted\" };\r\n\t\t//var text1:Phaser.Text = this.add.text(0, 0, \"1234567890%\", style1);\r\n\t\t//text1.destroy();\r\n\r\n\t\tvar style2 = { font: \"10px bariol_boldbold\" };\r\n\t\tvar text2 = this.add.text(0, 0, \"1234567890%\", style2);\r\n\t\ttext2.destroy();\r\n\t},\r\n\r\n\tpreload: function() {\r\n\t\tif (this.game.device.ie && this.game.device.ieVersion <= 9) {\r\n\t\t\tthis.load.useXDomainRequest = false;\r\n\t\t}\r\n\r\n\t\tthis.load.crossOrigin = \"anonymous\";\r\n\t\tthis.load.useXDomainRequest = true;\r\n\r\n\t\tthis.load.atlasJSONHash('preloader', 'assets/graphics/preloader.png', 'assets/graphics/preloader.json');\r\n\t},\r\n\r\n\tcreate: function () {\r\n\t\tthis.setupScale();\r\n\t\tthis.setupCanvasStyle();\r\n\t\tthis.setupCustomConsole();\r\n\t\tthis.addFPSMeter();\r\n\t\tthis.detectWeakDevice();\r\n\t\tthis.detectLanguage();\r\n\t\tthis.checkUserType();\r\n\r\n\t\tthis.input.maxPointers = 1;\r\n\t\tthis.stage.disableVisibilityChange = true;\r\n\t\t//this.game.plugins.add(new game.StateTransition(this.game)); // TODO implement StateTransition plugin\r\n\t\t//this.game.add.plugin(Phaser.Plugin.Debug);\r\n\t\tthis.game.renderer.clearBeforeRender = false;\r\n\t\tthis.game.tweens.frameBased = true;\r\n\r\n\t\tthis.game.state.start('Preloader', true, false);\r\n\t},\r\n\r\n\tsetupScale: function () {\r\n\t\tif (this.game.device.desktop) {\r\n\t\t\tthis.scaleForDesktop();\r\n\t\t} else {\r\n\t\t\tthis.scaleForMobile();\r\n\t\t\tthis.scaleGame();\r\n\r\n\t\t\tif (this.isLandscape()) {\r\n\t\t\t\tthis.onEnterLandscape();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tscaleForDesktop: function () {\r\n\t\tvar scale = this.game.scale;\r\n\r\n\t\tscale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\r\n\t\tscale.aspectRatio = Config.SOURCE_GAME_WIDTH / Config.SOURCE_GAME_HEIGHT;\r\n\t\tscale.pageAlignHorizontally = true;\r\n\t\tscale.pageAlignVertically = true;\r\n\t},\r\n\r\n\tscaleForMobile: function () {\r\n\t\tvar scale = this.game.scale;\r\n\r\n\t\tscale.scaleMode = Phaser.ScaleManager.EXACT_FIT;\r\n\t\tscale.forceOrientation(false, true);\r\n\t\tscale.onSizeChange.add(this.onSizeChange, this);\r\n\t},\r\n\r\n\tonSizeChange: function () {\r\n\t\tif (this.isPortrait()) {\r\n\t\t\tthis.scaleGame();\r\n\t\t\tthis.game.state.resize(Config.GAME_WIDTH, Config.GAME_HEIGHT);\r\n\t\t\tthis.onEnterPortrait();\r\n\t\t} else {\r\n\t\t\tthis.onEnterLandscape();\r\n\t\t}\r\n\t},\r\n\r\n\tsetupCanvasStyle: function () {\r\n\t\tif (this.game.device.desktop) {\r\n\t\t\tthis.game.canvas.style.boxShadow = \"0 0 30px black\";\r\n\t\t\tthis.game.canvas.parentElement.style.backgroundColor = \"#152E4D\";\r\n\t\t\t//this.game.canvas.parentElement.style.backgroundColor = \"#FFFFFF\";\r\n\t\t} else {\r\n\t\t\tthis.game.canvas.style.backgroundColor = \"black\";\r\n\t\t}\r\n\t},\r\n\r\n\tsetupCustomConsole: function () {\r\n\t\tif (this.game.device.desktop) {\r\n\t\t\tvar debugConsole = document.getElementById(\"debug_console\");\r\n\t\t\tif (debugConsole) {\r\n\t\t\t\tdebugConsole.style.display = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\taddFPSMeter: function () {\r\n\t\tif (Game.development) {\r\n\t\t\tvar fpsMeter = new utils.FPSMeter(this.game);\r\n\t\t\tthis.stage.addChild(fpsMeter);\r\n\t\t}\r\n\t},\r\n\r\n\tdetectWeakDevice: function () {\r\n\t\tGame.weakDevice = this.game.renderType === Phaser.CANVAS;\r\n\t},\r\n\r\n\tdetectLanguage: function () {\r\n\t\tGame.language = detectLanguage();\r\n\t},\r\n\r\n\tscaleGame: function () {\r\n\t\tvar windowWidth = window.innerWidth;\r\n\t\tvar windowHeight = window.innerHeight;\r\n\t\tvar deviceWidth = windowWidth * this.game.device.pixelRatio;\r\n\t\tvar newGameWidth = 0;\r\n\t\tvar newGameHeight = 0;\r\n\t\tif (deviceWidth <= Config.SOURCE_GAME_WIDTH) {\r\n\t\t\tnewGameWidth = windowWidth * 2;\r\n\t\t\tnewGameHeight = windowHeight * 2;\r\n\t\t} else {\r\n\t\t\tnewGameWidth = windowWidth;\r\n\t\t\tnewGameHeight = windowHeight;\r\n\t\t}\r\n\r\n\t\tvar originalWidth = Config.SOURCE_GAME_WIDTH;\r\n\t\tvar worldScale = newGameWidth / originalWidth;\r\n\t\tthis.world.scale.set(worldScale, worldScale);\r\n\t\tthis.scale.setGameSize(newGameWidth, newGameHeight);\r\n\r\n\t\tConfig.ASPECT_RATIO = newGameWidth / newGameHeight;\r\n\t\tConfig.WORLD_SCALE = worldScale;\r\n\t\tConfig.GAME_WIDTH = this.game.canvas.width / worldScale;\r\n\t\tConfig.GAME_HEIGHT = this.game.canvas.height / worldScale;\r\n\t\tConfig.HALF_GAME_WIDTH = Config.GAME_WIDTH * 0.5;\r\n\t\tConfig.HALF_GAME_HEIGHT = Config.GAME_HEIGHT * 0.5;\r\n\t},\r\n\r\n\tonEnterLandscape: function () {\r\n\t\tdocument.getElementById('rotate').style.display = 'block';\r\n\t\tdocument.getElementById('rotate').style.width = window.innerWidth + 'px';\r\n\t\tdocument.getElementById('rotate').style.height = window.innerHeight + 'px';\r\n\t},\r\n\r\n\tonEnterPortrait: function () {\r\n\t\tdocument.getElementById('rotate').style.display = 'none';\r\n\t},\r\n\r\n\tisLandscape: function () {\r\n\t\treturn (window.innerWidth > window.innerHeight);\r\n\t},\r\n\r\n\tisPortrait: function () {\r\n\t\treturn (window.innerHeight > window.innerWidth);\r\n\t},\r\n\r\n\tcheckUserType: function () {\r\n\t\t// TODO implement Stats\r\n\t\t/*var returningUser = Game.stats.getBooleanValue(\"Drawing_Numbers\");\r\n\t\t if (returningUser) {\r\n\t\t Game.analytics.sendEvent(\"user_type\", \"returning\");\r\n\t\t } else {\r\n\t\t Game.stats.saveValue(\"Drawing_Letters\", true);\r\n\t\t Game.analytics.sendEvent(\"user_type\", \"new\");\r\n\t\t }*/\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = Boot;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./states/Boot.js\n ** module id = 2\n ** module chunks = 0\n **/","Config = function() {\r\n\t\r\n};\r\n\r\nConfig.LANGUAGES = [\"en\", 'es', 'fr', 'it', 'pt'];\r\nConfig.SOURCE_GAME_WIDTH = 640;\r\nConfig.SOURCE_GAME_HEIGHT = 780; // TODO test 754\r\nConfig.GAME_WIDTH = Config.SOURCE_GAME_WIDTH;\r\nConfig.GAME_HEIGHT = Config.SOURCE_GAME_HEIGHT;\r\nConfig.HALF_GAME_WIDTH = Config.GAME_WIDTH * 0.5;\r\nConfig.HALF_GAME_HEIGHT = Config.GAME_HEIGHT * 0.5;\r\nConfig.WORLD_SCALE = 1;\r\nConfig.ASPECT_RATIO = Config.SOURCE_GAME_WIDTH / Config.SOURCE_GAME_HEIGHT;\r\n\r\nmodule.exports = Config;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./Config.js\n ** module id = 3\n ** module chunks = 0\n **/","var Game = require('./Game.js');\r\n\r\nLanguageDetector = function() {\r\n\r\n};\r\n\r\nLanguageDetector.detect = function() {\r\n\t/*var savedLanguage = LanguageDetector.getSavedLanguage();\r\n\tvar kimLanguage = LanguageDetector.getKIMLanguage();\r\n\tvar browserLanguage = LanguageDetector.getBrowserLanguage();\r\n\tvar queryLanguage = LanguageDetector.getQueryLanguage();\r\n\r\n\tvar language = savedLanguage || kimLanguage || browserLanguage || queryLanguage;\r\n\tvar languageSupported = Config.LANGUAGES.indexOf(language) > -1;\r\n\tif (!languageSupported) {\r\n\t\tlanguage = 'en';\r\n\t}\r\n\r\n\treturn language;*/\r\n\r\n\treturn 'en';\r\n};\r\n\r\nLanguageDetector.getSavedLanguage = function() {\r\n\tvar savedLanguage = Game.storage.getValue('language');\r\n\tif (savedLanguage) {\r\n\t\treturn _.trim(savedLanguage, '\\\"');\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nLanguageDetector.getKIMLanguage = function() {\r\n\tif (Game.KIM && Game.KIM['getLanguage']) {\r\n\t\treturn Game.KIM.getLanguage();\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nLanguageDetector.getBrowserLanguage = function() {\r\n\treturn navigator.language || navigator.userLanguage || navigator.browserLanguage;\r\n};\r\n\r\nLanguageDetector.getQueryLanguage = function() {\r\n\tvar net = new Phaser.Net(this.game);\r\n\tvar queryLang = net.getQueryString(\"lang\");\r\n\r\n\tif (_.isString(queryLang) && queryLang.length === 2) {\r\n\t\treturn queryLang;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nmodule.exports = LanguageDetector.detect;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./LanguageDetector.js\n ** module id = 4\n ** module chunks = 0\n **/","var Game = require('../Game');\r\nvar LettersConfig = require('../LettersConfig.js');\r\n\r\nPreloader = function () {\r\n\tthis.bg = null;\r\n\tthis.bgItems = null;\r\n\tthis.publisherLogo = null;\r\n\tthis.backPreloadSprite = null;\r\n\tthis.frontPreloadSprite = null;\r\n\tthis.loadingText = null;\r\n\tthis.copyright = null;\r\n};\r\n\r\nPreloader.prototype = Object.create(Phaser.State);\r\nPreloader.prototype = {\r\n\r\n\tconstructor: Preloader,\r\n\r\n\tinit: function() {\r\n\t\tthis.addBackgound();\r\n\t\tthis.addPreloadBar();\r\n\t\tthis.addLoadingText();\r\n\r\n\t\tthis.resize();\r\n\t},\r\n\r\n\taddBackgound: function() {\r\n\t\tthis.bg = this.game.add.image(0, 0, \"preloader\", \"BG0000\");\r\n\r\n\t\tthis.bgItems = this.game.add.image(0, 0, \"preloader\", \"BG_Items0000\");\r\n\t\tthis.bgItems.anchor.set(0.5, 0.5);\r\n\t\tthis.bgItems.scale.set(1.33, 1.33);\r\n\t},\r\n\r\n\taddPreloadBar: function () {\r\n\t\tthis.backPreloadSprite = this.game.add.image(0, 0, \"preloader\", \"Preloader_Back0000\");\r\n\t\tthis.backPreloadSprite.anchor.set(0.5, 0.5);\r\n\t\tthis.backPreloadSprite.x = Config.HALF_GAME_WIDTH;\r\n\t\tthis.backPreloadSprite.y = Config.HALF_GAME_HEIGHT;\r\n\r\n\t\tthis.frontPreloadSprite = this.game.add.sprite(0, 0, \"preloader\", \"Preloader_Front0000\");\r\n\t\tthis.frontPreloadSprite.x = (Config.GAME_WIDTH - this.frontPreloadSprite.width) * 0.5;\r\n\t},\r\n\r\n\taddLoadingText: function () {\r\n\t\tvar style = {font: \"58px \" + Game.fontFamily, fill: \"#ffffff\", align: \"center\"};\r\n\r\n\t\tthis.loadingText = this.game.add.text(0, 0, \"Loading...\", style);\r\n\t\tthis.loadingText.anchor.set(0.5, 0.5);\r\n\t\tthis.loadingText.position.set(Config.HALF_GAME_WIDTH, Config.HALF_GAME_HEIGHT + 175);\r\n\t\tthis.loadingText.setShadow(2, 2, \"#E54510\", 2);\r\n\t\t//this.loadingText.visible = false;\r\n\t},\r\n\r\n\taddCopyright: function () {\r\n\t\tvar content = \"(C) RoboWhale, 2016\\nUse with permission\";\r\n\t\tvar style = {font: \"22px \" + Game.fontFamily, fill: \"#CDE7F7\", align: \"center\"};\r\n\t\tthis.copyright = this.game.add.text(0, 0, content, style);\r\n\t\tthis.copyright.anchor.set(0.5, 0.5);\r\n\t\tthis.copyright.position.set(Config.HALF_GAME_WIDTH, Config.HALF_GAME_HEIGHT + 175);\r\n\t\tthis.copyright.setShadow(2, 2, \"#333333\");\r\n\t\tthis.copyright.lineSpacing = -8;\r\n\t\tthis.copyright.alpha = 0.75;\r\n\t},\r\n\r\n\tpreload: function () {\r\n\t\tthis.loadLettersConfigs();\r\n\t\tthis.loadOtherAssets();\r\n\t\tthis.loadAudio();\r\n\t\tthis.loadGraphics();\r\n\r\n\t\tthis.load.setPreloadSprite(this.frontPreloadSprite);\r\n\t},\r\n\r\n\tloadLettersConfigs: function() {\r\n\t\tvar baseUrl = \"https://robowhale.com/html5/dl-editor/\";\r\n\t\tvar filename = Game.language + \"_letters.json\";\r\n\r\n\t\t//this.load.json(\"letters\", baseUrl + filename);\r\n\r\n\t\tthis.load.json(\"letters\", \"assets/letters/\" + filename); // local\r\n\t},\r\n\r\n\tloadOtherAssets: function() {\r\n\t\tthis.load.json(\"texts\", \"assets/texts.json\");\r\n\t},\r\n\r\n\tloadAudio: function() {\r\n\t\t//this.load.audio(\"Game_loop\", ['assets/audio/GameLoop.ogg', 'assets/audio/GameLoop.m4a'], true);\r\n\t\tif (this.game.sound.usingWebAudio) {\r\n\t\t\tthis.load.audio(\"tap\", 'assets/audio/tap.wav', true);\r\n\r\n\t\t\t/*// level\r\n\t\t\tthis.load.audio(\"star_collect\", ['assets/audio/convert_item.ogg', 'assets/audio/convert_item.m4a'], true);\r\n\t\t\tthis.load.audio(\"show_picture\", ['assets/audio/achieved.ogg', 'assets/audio/achieved.m4a'], true);\r\n\t\t\tthis.load.audio(\"restart\", ['assets/audio/restart.ogg', \"assets/audio/restart.m4a\"], true);\r\n\t\t\tthis.loadSound(\"star_arrive\", \"Collect Item\");\r\n\t\t\tthis.loadSound(\"stars_on_complete\", \"Small Success\");\r\n\t\t\tthis.loadSound(\"letter_show\", \"Scoring a Point\");\r\n\t\t\tthis.loadSound(\"win\", \"Cartoon Big Win\");\r\n\r\n\t\t\t// word level\r\n\t\t\tthis.loadSound(\"error_1\", \"App Error\");\r\n\t\t\tthis.loadSound(\"tile_click_success_5\", \"Correct Answer 3\");\r\n\t\t\tthis.loadSound(\"tiles_collected_1\", \"Collect Item\");\r\n\t\t\tthis.loadSound(\"word_level_complete_1\", \"Happy Win Game\");\r\n\t\t\tthis.loadSound(\"cheers\", \"kids_cheers\");\r\n\r\n\t\t\t// free zone\r\n\t\t\tthis.loadSound(\"pop_2\", \"Pop_B\", ['wav']);\r\n\t\t\tthis.loadSound(\"pop_4\", \"Pop_D\", ['wav']);\r\n\t\t\tthis.loadSound(\"photo\", 'photo');\r\n\t\t\tthis.loadSound(\"erase\", \"erase_board\");\r\n\r\n\t\t\t// letters complete\r\n\t\t\tthis.loadSound(\"win_2\", \"Game Award 3\");\r\n\t\t\tthis.loadSound(\"win_3\", \"Well done\");*/\r\n\t\t}\r\n\r\n\t\t/*var assetName = Game.language + \"_sounds\";\r\n\t\tthis.load.audio(\"words_sounds\", ['assets/audio/words/' + assetName + '.ogg', 'assets/audio/words/' + assetName + '.m4a'], true);\r\n\t\tthis.load.json(\"sounds_config\", 'assets/audio/words/' + Game.language + '_sounds.json');*/\r\n\t},\r\n\r\n\tloadSound: function(key, filename) {\r\n\t\tvar basePath = \"assets/audio/\";\r\n\t\tvar fullFilename = basePath + filename + \".\";\r\n\t\tvar urls = ['ogg', 'm4a'].map(function(format) {\r\n\t\t\treturn fullFilename + format;\r\n\t\t});\r\n\r\n\t\tthis.load.audio(key, urls, true);\r\n\t},\r\n\r\n\tloadGraphics: function() {\r\n\t\tthis.load.atlasJSONHash('backgrounds_1', 'assets/graphics/backgrounds_1.png', 'assets/graphics/backgrounds_1.json');\r\n\t\tthis.load.atlasJSONHash('letters_1', 'assets/graphics/letters_1.png', 'assets/graphics/letters_1.json');\r\n\t\tthis.load.atlasJSONHash('letters_2', 'assets/graphics/letters_2.png', 'assets/graphics/letters_2.json');\r\n\t\tthis.load.atlasJSONHash('pictures_1', 'assets/graphics/pictures_1.png', 'assets/graphics/pictures_1.json');\r\n\t\tthis.load.atlasJSONHash('pictures_2', 'assets/graphics/pictures_2.png', 'assets/graphics/pictures_2.json');\r\n\t\tthis.load.atlasJSONHash('choose_level', 'assets/graphics/choose_level.png', 'assets/graphics/choose_level.json');\r\n\t\tthis.load.atlasJSONHash('graphics_1', 'assets/graphics/graphics_1.png', 'assets/graphics/graphics_1.json');\r\n\t\tthis.load.atlasJSONHash('main_menu', 'assets/graphics/main_menu.png', 'assets/graphics/main_menu.json');\r\n\t\tthis.load.atlasJSONHash('languages_menu', 'assets/graphics/languages_menu.png', 'assets/graphics/languages_menu.json');\r\n\t\tthis.load.atlasJSONHash('word_level', 'assets/graphics/word_level.png', 'assets/graphics/word_level.json');\r\n\t\tthis.load.atlasJSONHash('free_zone', 'assets/graphics/free_zone.png', 'assets/graphics/free_zone.json');\r\n\t\tthis.load.atlasJSONHash('letters_complete', 'assets/graphics/letters_complete.png', 'assets/graphics/letters_complete.json');\r\n\t},\r\n\r\n\tloadUpdate: function() {\r\n\t\tthis.loadingText.setText(this.load.progress + \"%\");\r\n\t},\r\n\r\n\tcreate: function () {\r\n\t\tthis.initTexts();\r\n\t\t//this.initWordSounds();\r\n\t\tthis.initGameMusicLoop();\r\n\t\tthis.createCanvasLetterBMD();\r\n\t\tthis.initLettersConfig();\r\n\t\tthis.handleSoundByKIM_API();\r\n\r\n\t\t//console.log(`Language: ${Game.language}`);\r\n\r\n\t\tconsole.log(\"PRELOADER CREATE\");\r\n\r\n\t\tthis.game.changeState(\"MainMenu\", true);\r\n\t\t//(<game.Game> this.game).changeState(\"LanguagesMenu\");\r\n\t\t//(<game.Game> this.game).changeState(\"ChooseLevelMenu\");\r\n\t\t//(<game.Game> this.game).changeState(\"ChooseWordMenu\");\r\n\t\t//(<game.Game> this.game).changeState(\"Level\", \"i\");\r\n\t\t//(<game.Game> this.game).changeState(\"WordLevel\", \"a\");\r\n\t\t//(<game.Game> this.game).changeState(\"FreeZone\");\r\n\t\t//(<game.Game> this.game).changeState(\"LettersCompleteScreen\");\r\n\t},\r\n\r\n\tinitTexts: function() {\r\n\t\tvar allTexts = this.game.cache.getJSON(\"texts\");\r\n\r\n\t\tGame.texts = allTexts[Game.language];\r\n\t},\r\n\r\n\tinitWordSounds: function() {\r\n\t\tvar soundsConfig = this.game.cache.getJSON(\"sounds_config\");\r\n\t\tvar sound = this.game.add.sound(\"words_sounds\");\r\n\t\tsound.allowMultiple = true;\r\n\r\n\t\tconsole.groupCollapsed(\"Sound markers\");\r\n\t\tObject.keys(soundsConfig).sort().forEach(function(key) {\r\n\t\t\tvar data = soundsConfig[key];\r\n\t\t\tvar start = data[0];\r\n\t\t\tvar end = data[1];\r\n\t\t\tvar duration = end - start;\r\n\r\n\t\t\tsound.addMarker(key, start, duration);\r\n\r\n\t\t\tconsole.log(\"%s: [%s - %s, duration: %s]\", key, start, end, duration.toFixed(2));\r\n\t\t});\r\n\t\tconsole.groupEnd();\r\n\t\r\n\t\tGame.wordsSounds = sound;\r\n\t},\r\n\r\n\tinitGameMusicLoop: function() {\r\n\t\tGame.GameMusicLoop = this.sound.add(\"Game_loop\", Game.fullVolume, true, true);\r\n\t},\r\n\r\n\tcreateCanvasLetterBMD: function() {\r\n\t\tvar bmd = this.game.make.bitmapData(330, 350, \"canvas_letter\", true);\r\n\r\n\t\t// create big and small bmds ???\r\n\t\t////var bmd:Phaser.BitmapData = this.game.make.bitmapData(512, 512, \"canvas_letter\", true);\r\n\t\t//var bmd:Phaser.BitmapData = this.game.make.bitmapData(256, 256, \"canvas_letter\", true);\r\n\r\n\t\tbmd.smoothed = true;\r\n\t},\r\n\r\n\tinitLettersConfig: function() {\r\n\t\tGame.lettersConfig = new LettersConfig(this.game);\r\n\t\tGame.lettersConfig.init();\r\n\t},\r\n\r\n\thandleSoundByKIM_API: function() {\r\n\t\tif (Game.KIM) {\r\n\t\t\tGame.KIM.onToggleBGM = this.onSoundToggle.bind(this);\r\n\r\n\t\t\tthis.sound.mute = !Game.KIM.isMusicOn();\r\n\t\t}\r\n\t},\r\n\r\n\tonSoundToggle: function() {\r\n\t\tthis.sound.mute = !Game.KIM.isMusicOn();\r\n\t},\r\n\r\n\tresize: function() {\r\n\t\tthis.resizeBackground();\r\n\t\tthis.alignSprites();\r\n\t},\r\n\r\n\tresizeBackground: function() {\r\n\t\tthis.bg.width = Config.GAME_WIDTH + 1;\r\n\t\tthis.bg.height = Config.GAME_HEIGHT + 1;\r\n\r\n\t\tthis.bgItems.x = Config.HALF_GAME_WIDTH;\r\n\t\tthis.bgItems.y = Config.HALF_GAME_HEIGHT;\r\n\t},\r\n\r\n\talignSprites: function() {\r\n\t\tthis.backPreloadSprite.y = Config.GAME_HEIGHT * 0.5;\r\n\r\n\t\tthis.frontPreloadSprite.y = this.backPreloadSprite.bottom - 41;\r\n\r\n\t\tthis.loadingText.y = this.backPreloadSprite.y + 80;\r\n\t\t//this.copyright.y = Config.GAME_HEIGHT - this.copyright.height * 0.5 - 8;\r\n\t},\r\n\r\n\tshutdown: function () {\r\n\t\tthis.cache.removeImage(\"preloader\", true);\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = Preloader;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./states/Preloader.js\n ** module id = 5\n ** module chunks = 0\n **/","LettersConfig = function(game) {\r\n\tthis.game = game;\r\n\r\n\tthis._config = null;\r\n\tthis._keys = null;\r\n};\r\n\r\nLettersConfig.prototype.init = function() {\r\n\tthis._config = this.game.cache.getJSON(\"letters\");\r\n\tthis._keys = Object.keys(this._config).sort();\r\n};\r\n\r\nLettersConfig.prototype.getLetterConfig = function(letter) {\r\n\treturn this._config[letter];\r\n};\r\n\r\nLettersConfig.prototype.getNextLetter = function(letter) {\r\n\tvar letter = letter ? letter : this.currentLetter;\r\n\tvar index = this._keys.indexOf(letter);\r\n\r\n\treturn this._keys[index + 1];\r\n};\r\n\r\nLettersConfig.prototype.getPrevLetter = function(letter) {\r\n\tvar letter = letter ? letter : this.currentLetter;\r\n\tvar index = this._keys.indexOf(letter);\r\n\r\n\treturn this._keys[index - 1];\r\n};\r\n\r\nObject.defineProperty(LettersConfig.prototype, \"config\", {\r\n\tget: function () {\r\n\t\treturn this._config;\r\n\t}\r\n});\r\n\r\nObject.defineProperty(LettersConfig.prototype, \"keys\", {\r\n\tget: function () {\r\n\t\treturn this._keys;\r\n\t}\r\n});\r\n\r\nmodule.exports = LettersConfig;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./LettersConfig.js\n ** module id = 6\n ** module chunks = 0\n **/","\r\n\r\nMainMenu = function () {\r\n\tthis.titleClicks = 0;\r\n\tthis.talkBubbleClicks = 0;\r\n\tthis.fromPreloader = false;\r\n};\r\n\r\nMainMenu.prototype = Object.create(Phaser.State);\r\n\r\nMainMenu.prototype.init = function (fromPreloader) {\r\n\tthis.fromPreloader = fromPreloader;\r\n\tthis.titleClicks = 0;\r\n};\r\n\r\nMainMenu.prototype.create = function() {\r\n\tthis.addBackground();\r\n\tthis.addLetters();\r\n\tthis.addTitle();\r\n\tthis.addZebra();\r\n\tthis.addTalkBubble();\r\n\tthis.addButtons();\r\n\tthis.addCredits();\r\n\tthis.resize();\r\n\r\n\t//if (Game.weakDevice === false) {\r\n\t//\tthis.initAnimation();\r\n\t//}\r\n\r\n\tif (this.fromPreloader) {\r\n\t\tthis.handleMusicOnStart();\r\n\r\n\t\tthis.stage.disableVisibilityChange = false;\r\n\r\n\t\tthis.game.onBlur.add(this.onFocusLost, this);\r\n\t\tthis.game.onFocus.add(this.onFocus, this);\r\n\t}\r\n\r\n\tGame.analytics.sendPageview(\"main_menu\");\r\n};\r\n\r\nMainMenu.prototype.handleMusicOnStart = function() {\r\n\tif (this.game.device.desktop) {\r\n\t\tthis.soundButton.switchTextures();\r\n\t\tthis.startMusic();\r\n\t} else {\r\n\t\tthis.soundButton.input.enabled = false;\r\n\t\tthis.soundButton.switchTextures();\r\n\t\tthis.game.input.onDown.addOnce(this.startMusic, this);\r\n\t}\r\n};\r\n\r\nMainMenu.prototype.onFocusLost = function() {\r\n\tGame.wasMuted = this.game.sound.mute;\r\n\tthis.game.sound.mute = true;\r\n};\r\n\r\nMainMenu.prototype.onFocus = function() {\r\n\tif (game.Main.wasMuted === false)\r\n\t\tthis.game.sound.mute = false;\r\n};\r\n\r\nMainMenu.prototype.addBackground = function() {\r\n\tthis.background = this.game.add.image(0, 0, \"main_menu\", \"BG0000\");\r\n};\r\n\r\nMainMenu.prototype.addLetters = function() {\r\n\tthis.letters = this.game.add.image(0, 0, \"main_menu\", \"Letters_BG0000\");\r\n\tthis.letters.anchor.set(0.5, 0.5);\r\n\tthis.letters.x = Config.HALF_GAME_WIDTH;\r\n};\r\n\r\nMainMenu.prototype.addTitle = function() {\r\n\tvar _this = this;\r\n\tthis.title = this.add.image(0, 0, \"main_menu\", \"Title0000\");\r\n\tthis.title.anchor.set(0.5, 0.5);\r\n\tthis.title.x = Config.HALF_GAME_WIDTH - 0.5;\r\n\tthis.title.y = Config.GAME_HEIGHT * 0.15;\r\n\tthis.title.inputEnabled = true;\r\n\tthis.title.events.onInputDown.add(function () {\r\n\t\tif (_this.titleClicks++ > 5) {\r\n\t\t\t_this.titleClicks = 0;\r\n\t\t\t_this.game.add.tween(_this.title).to({alpha: 0}, 300, Phaser.Easing.Sinusoidal.InOut, true, 0, 0, true);\r\n\t\t\tgame.Main.storage.clear();\r\n\t\t\twindow.alert(\"Saved data was cleared!\");\r\n\t\t}\r\n\t});\r\n};\r\n\r\nMainMenu.prototype.addZebra = function() {\r\n\tthis.zebra = this.game.add.image(0, 0, \"main_menu\", \"Zebra0000\");\r\n\tthis.zebra.anchor.set(0.5, 1);\r\n\tthis.zebra.x = Config.GAME_WIDTH - 85;\r\n\tthis.zebra.inputEnabled = true;\r\n\tthis.zebra.events.onInputDown.add(this.onZebraClick, this);\r\n};\r\n\r\nMainMenu.prototype.onZebraClick = function() {\r\n\tthis.game.sound.play('pop_4', 0.5);\r\n\tthis.tweens.removeFrom(this.zebra);\r\n\tthis.zebra.y = Config.GAME_HEIGHT + 137;\r\n\tthis.game.add.tween(this.zebra).to({y: '-40'}, 200, Phaser.Easing.Sinusoidal.InOut, true, 0, 0, true);\r\n\tthis.talkBubble.updateContent();\r\n};\r\n\r\nMainMenu.prototype.addTalkBubble = function() {\r\n\tthis.talkBubble = new game.TalkBubble(this.game, this.world);\r\n\tthis.talkBubble.position.x = this.zebra.left - 10;\r\n};\r\n\r\nMainMenu.prototype.onTalkBubbleClick = function() {\r\n\tthis.talkBubbleClicks++;\r\n\tif (this.talkBubbleClicks === 5) {\r\n\t\tthis.testKIM_API();\r\n\t}\r\n};\r\n\r\nMainMenu.prototype.addButtons = function() {\r\n\tvar _this = this;\r\n\tthis.soundButton = new game.ToggleButton(this.game, 0, 0, \"main_menu\", \"Button_Sound_On0000\", \"Button_Sound_Off0000\");\r\n\tthis.soundButton.callback.add(function () {\r\n\t\t_this.game.sound.mute = !_this.game.sound.mute;\r\n\t});\r\n\tthis.soundButton.visible = _.isUndefined(game.Main.KIM);\r\n\tif (this.game.sound.mute) {\r\n\t\tthis.soundButton.switchTextures();\r\n\t}\r\n\tthis.playButton = new game.SimpleButton(this.game, 0, 0, \"main_menu\", \"Button_Play0000\");\r\n\tthis.playButton.setCallbackDelay(200);\r\n\tthis.playButton.callback.addOnce(this.onPlayButtonClick, this);\r\n\tvar imageKey = \"Flag_\" + game.Main.language.toUpperCase() + \"_Round0000\";\r\n\tthis.languageButton = new game.SimpleButton(this.game, 0, 0, \"main_menu\", imageKey);\r\n\tthis.languageButton.x = Config.GAME_WIDTH - 60;\r\n\tthis.languageButton.callback.addOnce(this.gotoLanguagesMenu, this);\r\n\tthis.creditsButton = new game.SimpleButton(this.game, 0, 0, \"main_menu\", \"Button_Credits0000\");\r\n\tthis.creditsButton.callback.add(this.toggleCredits, this);\r\n\tthis.buttons = [this.soundButton, this.creditsButton, this.playButton, this.languageButton];\r\n\tthis.buttons.forEach(function (button) {\r\n\t\t_this.world.add(button);\r\n\t});\r\n};\r\n\r\nMainMenu.prototype.onPlayButtonClick = function() {\r\n\tthis.game.changeState(\"ChooseLevelMenu\");\r\n};\r\n\r\nMainMenu.prototype.gotoLanguagesMenu = function() {\r\n\tthis.game.changeState(\"LanguagesMenu\");\r\n};\r\n\r\nMainMenu.prototype.addCredits = function() {\r\n\tthis.credits = this.game.add.image(0, 0, \"main_menu\", \"CreditsBoard0000\");\r\n\tthis.credits.position.set(Math.round((Config.GAME_WIDTH - this.credits.width) * 0.5), Math.round((Config.GAME_HEIGHT - this.credits.height) * 0.5));\r\n\tthis.credits.visible = false;\r\n};\r\n\r\nMainMenu.prototype.toggleCredits = function() {\r\n\tif (this.credits.visible) {\r\n\t\tthis.hideCredits();\r\n\t}\r\n\telse {\r\n\t\tthis.showCredits();\r\n\t}\r\n};\r\n\r\nMainMenu.prototype.hideCredits = function() {\r\n\tvar _this = this;\r\n\tthis.game.add.tween(this.credits).to({alpha: 0}, 500, Phaser.Easing.Linear.None, true);\r\n\tthis.game.add.tween(this.credits).to({y: this.credits.y + 200}, 500, Phaser.Easing.Back.In, true)\r\n\t\t.onComplete.addOnce(function () {\r\n\t\t_this.playButton.input.enabled = true;\r\n\t\t_this.creditsButton.input.enabled = true;\r\n\t\t_this.credits.visible = false;\r\n\t}, this);\r\n};\r\n\r\nMainMenu.prototype.showCredits = function() {\r\n\tvar _this = this;\r\n\tthis.credits.visible = true;\r\n\tthis.credits.alpha = 0;\r\n\tthis.credits.y = (Config.GAME_HEIGHT - this.credits.height) * 0.5 + 200;\r\n\tthis.game.add.tween(this.credits).to({alpha: 1}, 500, Phaser.Easing.Linear.None, true);\r\n\tthis.game.add.tween(this.credits).to({y: this.credits.y - 200}, 500, Phaser.Easing.Back.Out, true);\r\n\tthis.playButton.input.enabled = false;\r\n\tthis.creditsButton.input.enabled = false;\r\n\tthis.game.input.onDown.addOnce(function () {\r\n\t\t_this.hideCredits();\r\n\t}, this);\r\n};\r\n\r\nMainMenu.prototype.startMusic = function() {\r\n\tif (game.Main.mainMusicLoop) {\r\n\t\tgame.Main.mainMusicLoop.play();\r\n\t}\r\n\tthis.soundButton.switchTextures();\r\n\tthis.soundButton.input.enabled = true;\r\n};\r\n\r\nMainMenu.prototype.testKIM_API = function() {\r\n\tvar style = {font: \"30px \" + game.Main.fontFamily, fill: \"#fff0000\", align: \"center\"};\r\n\tvar text = this.game.add.text(0, 0, \"\", style);\r\n\ttext.anchor.set(0.5, 0.5);\r\n\ttext.x = Config.HALF_GAME_WIDTH;\r\n\ttext.y = Config.GAME_HEIGHT * 0.9;\r\n\ttext.setShadow(0, 2, 0, 0, true, true);\r\n\ttext.lineSpacing = -6;\r\n\ttext.setText(\"\\n\\t\\t\\t\\tKIM API: \" + (_.isUndefined(game.Main.KIM) === false) + \"\\n\\t\\t\\t\\t\" + window.location.href + \"\\n\\t\\t\\t\");\r\n};\r\n\r\nMainMenu.prototype.initAnimation = function() {\r\n\tthis.game.add.tween(this.letters.scale).from({x: 1.5, y: 1.5}, 600, Phaser.Easing.Back.Out, true);\r\n\tthis.game.add.tween(this.letters).from({alpha: 0}, 600, Phaser.Easing.Cubic.Out, true);\r\n\tthis.animateTitle();\r\n\tthis.animateZebra();\r\n\tthis.animateButtons();\r\n};\r\n\r\nMainMenu.prototype.animateTitle = function() {\r\n\tvar _this = this;\r\n\tvar delay = 350;\r\n\tthis.title.alpha = 0;\r\n\tthis.title.scale.set(1.3, 1.3);\r\n\tthis.game.add.tween(this.title).to({alpha: 1}, 300, Phaser.Easing.Cubic.Out, true, delay);\r\n\tthis.game.add.tween(this.title.scale).to({x: 1, y: 1}, 600, Phaser.Easing.Back.Out, true, delay)\r\n\t\t.onComplete.addOnce(function () {\r\n\t\t_this.game.add.tween(_this.title.scale).to({\r\n\t\t\ty: 0.94,\r\n\t\t\tx: 1.06\r\n\t\t}, 800, Phaser.Easing.Sinusoidal.InOut, true, 0, 1000, true);\r\n\t});\r\n};\r\n\r\nMainMenu.prototype.animateZebra = function() {\r\n\tvar _this = this;\r\n\tvar delay = 700;\r\n\tthis.zebra.scale.set(0);\r\n\tthis.game.add.tween(this.zebra.scale).to({x: 1, y: 1}, 600, Phaser.Easing.Back.Out, true, delay)\r\n\t\t.onComplete.addOnce(function () {\r\n\t\t_this.game.add.tween(_this.zebra.scale).to({y: 0.95}, 800, Phaser.Easing.Sinusoidal.Out, true, 0, 10000, true);\r\n\t});\r\n\tthis.game.add.tween(this.talkBubble.scale).from({\r\n\t\tx: 0,\r\n\t\ty: 0\r\n\t}, 600, Phaser.Easing.Back.Out, true, delay + 400);\r\n\tthis.game.add.tween(this.talkBubble).from({angle: -40}, 600, Phaser.Easing.Back.Out, true, delay + 400)\r\n\t\t.onComplete.addOnce(function () {\r\n\t\t_this.game.add.tween(_this.talkBubble.position).to({y: '+10'}, 800, Phaser.Easing.Sinusoidal.InOut, true, 0, 1000, true);\r\n\t});\r\n};\r\n\r\nMainMenu.prototype.animateButtons = function() {\r\n\tvar _this = this;\r\n\tvar delay = 1300;\r\n\tthis.buttons.forEach(function (button) {\r\n\t\tbutton.scale.set(0, 0);\r\n\t\tvar tween = _this.game.add.tween(button.scale).to({\r\n\t\t\tx: 1,\r\n\t\t\ty: 1\r\n\t\t}, 500, Phaser.Easing.Back.Out, true, delay);\r\n\t\tif (button === _this.playButton) {\r\n\t\t\ttween.onComplete.addOnce(_this.shakePlayButton, _this);\r\n\t\t}\r\n\t\tdelay += 150;\r\n\t});\r\n};\r\n\r\nMainMenu.prototype.shakePlayButton = function() {\r\n\tvar _this = this;\r\n\tvar angle = -5;\r\n\tthis.time.events.repeat(2200, Number.MAX_VALUE, function () {\r\n\t\t_this.playButton.angle = angle;\r\n\t\t_this.game.add.tween(_this.playButton).to({angle: Math.abs(angle)}, 100, Phaser.Easing.Sinusoidal.InOut, true, 0, 2, true)\r\n\t\t\t.onComplete.add(function () {\r\n\t\t\t_this.game.add.tween(_this.playButton).to({angle: 0}, 100, Phaser.Easing.Linear.None, true);\r\n\t\t});\r\n\t}, this);\r\n};\r\n\r\nMainMenu.prototype.resize = function() {\r\n\tthis.resizeBackground();\r\n\tthis.alingSprites();\r\n\tthis.alignButtons();\r\n};\r\n\r\nMainMenu.prototype.resizeBackground = function() {\r\n\tthis.background.height = Config.GAME_HEIGHT;\r\n\tthis.letters.y = Config.HALF_GAME_HEIGHT;\r\n\tif (this.letters.height < Config.GAME_HEIGHT) {\r\n\t\tvar scale = Config.GAME_HEIGHT / this.letters.height;\r\n\t\tthis.letters.scale.set(scale, scale);\r\n\t}\r\n};\r\n\r\nMainMenu.prototype.alingSprites = function() {\r\n\tthis.title.y = Config.GAME_HEIGHT * 0.2;\r\n\tthis.zebra.y = Config.GAME_HEIGHT + 137;\r\n\tthis.talkBubble.position.y = this.zebra.top + 150;\r\n\tthis.soundButton.x = Config.GAME_WIDTH - this.soundButton.width * 0.5 - 20;\r\n\tthis.soundButton.y = Config.GAME_HEIGHT * 0.08;\r\n};\r\n\r\nMainMenu.prototype.alignButtons = function() {\r\n\tvar distance = this.zebra.top - this.title.bottom;\r\n\tvar y = this.title.bottom + distance * 0.5;\r\n\tvar dx = 155;\r\n\tthis.playButton.x = Config.HALF_GAME_WIDTH;\r\n\tthis.playButton.y = y;\r\n\tthis.creditsButton.x = this.playButton.x - dx;\r\n\tthis.creditsButton.y = y;\r\n\tthis.languageButton.x = this.playButton.x + dx;\r\n\tthis.languageButton.y = y;\r\n};\r\n\r\nMainMenu.prototype.shutdown = function() {\r\n\tthis.buttons = null;\r\n};\r\n\r\nmodule.exports = MainMenu;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./states/mainMenu/MainMenu.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}